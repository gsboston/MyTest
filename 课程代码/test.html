<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // slice 取值，数组本身不变化 


        // splice 删除，替换，数组本身会变化
        var arr = [1, 2, 3, 4, 5];
        arr.splice(2, 1, 7);
        // arr [1,2,7,4,5]

        // split 字符串=》数组 s.split(',');
        var s = "1,2,3,4,5";
        var arr = s.split(',');
        // arr  ["1", "2", "3", "4", "5"]

        //  push从尾加 pop删除数组最后一个元素 shift删除数组第一个元素 
        // unshift从头加 
        // concat 合并数组 
        var arr1 = [1, 2, 3, 4];
        var arr2 = [5, 6, 7, 8];
        var a = arr1.concat(arr2);
        //  [1, 2, 3, 4, 5, 6, 7, 8] 原数组没有变化。

        // 函数式编程。纯函数。

        // reduce
        // 去掉，
        var str = "123,,,4214,453,654,,,6547,,123,2314";

        function fn() {
            var result = "";
            for (var i = 0; i < str.length; i++) {
                if (str[i] == ',') {
                    if (result[result.length - 1] != ',') {
                        result += str[i];
                    }
                } else {
                    result += str[i];
                }
            }
            return result;
        }

        fn(str);

        // zhengze
        var reg = /,{2,}/g
        str.replace(reg, ',');

        // 扁平化数组
        // 1.
        var arr = [1, 2, 3, [4, 5, 6], 7, [8]];
        var newarr = arr.toString().split(',');

        // 2.reduce + 递归：自己调用自己*
        function fn1(arr) {
            return arr.reduce((preVal, newVal, index, arr) =>
                [].concat(Array.isArray(preVal) && preVal ? fn1(preVal) : preVal, Array.isArray(newVal) && newVal ? fn1(newVal) : newVal)
            )
        }

        // reduce
        var arr = [1, 2, 3, 4];
        arr.reduce((preVal, newVal, index, arr) => {
            return preVal + newVal;
        })

        // 3.用遍历实现扁平化
        var arr = [1, 2, 3, [4, 5, 6], 7, [8]];
        var newArr = [];
        function fn2(arr) {
            for (var i = 0; i < arr.length; i++) {
                // instanceof 判断一个对象是另一个构造函数的实例
                if (arr[i] instanceof Array) {
                    fn2(arr[i]);
                } else {
                    newArr.push(arr[i]);
                }
            }
        }


        // 数组去重

        var arr = [1, 2, 3, 4, 2, 3, 6, 9, 8, 6, 6, 7];

        // 1.
        var newArr = Array.from(new Set(arr));

        // 2.通过对象方式 实现数组去重
        function fn3(arr) {
            var result = [];
            var obj = {};
            for (var i = 0; i < arr.length; i++) {
                if (!obj[arr[i]]) {
                    result.push(arr[i]);
                    obj[arr[i]] = true;
                }
            }
            return result;
        }

        // 排序
        // 冒泡 插入
        var arr = [7, 3, 8, 5, 4, 1, 9, 6, 2];
        function sArr(arr) {
            return arr.sort(function (a, b) {
                return a - b;
            })
        }

        // 深拷贝 浅拷贝
        function deepCopy(obj) {
            var result = Array.isArray(obj) ? [] : {};
            for (var key in obj) {
                result[key] = obj[key];
            }
            return result;
        }

        // 深拷贝
        function deepCopy(obj) {
            var result = Array.isArray(obj) ? [] : {};
            for (var key in obj) {
                if (obj.hasOwnProperty(key)) {
                    if (typeof obj[key] === 'object' && obj[key] !== null) {
                        result[key] = deepCopy(obj[key]);   //递归复制
                    } else {
                        result[key] = obj[key];
                    }
                }
            }
            return result;
        }

        /^[a-zA-Z].$/g
    </script>
</body>

</html>